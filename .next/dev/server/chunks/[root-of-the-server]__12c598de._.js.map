{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/anshumankhare/Downloads/site/app/api/subscribe/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\n\nconst BEEHIIV_PUB_ID = 'pub_1209a3dd-cebb-4f60-b283-177893e6a2cb'\nconst BEEHIIV_API_KEY = 'LUeYUUu3sqIuQMbdBlnh46rcDzFPhAhC9dDKKmqnAyMqebYZCUf9eaHp4F6Joj7Q'\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { email } = await req.json()\n\n    if (!email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n      return NextResponse.json({ error: 'Invalid email address.' }, { status: 400 })\n    }\n\n    const res = await fetch(\n      `https://api.beehiiv.com/v2/publications/${BEEHIIV_PUB_ID}/subscriptions`,\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${BEEHIIV_API_KEY}`,\n        },\n        body: JSON.stringify({\n          email,\n          reactivate_existing: false,\n          send_welcome_email: true,\n        }),\n      }\n    )\n\n    if (res.ok) {\n      return NextResponse.json({ success: true })\n    }\n\n    const data = await res.json()\n    return NextResponse.json(\n      { error: data?.message ?? 'Beehiiv error. Please try again.' },\n      { status: res.status }\n    )\n  } catch {\n    return NextResponse.json({ error: 'Server error. Please try again.' }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,iBAAiB;AACvB,MAAM,kBAAkB;AAEjB,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhC,IAAI,CAAC,SAAS,CAAC,6BAA6B,IAAI,CAAC,QAAQ;YACvD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,MAAM,MAAM,MAChB,CAAC,wCAAwC,EAAE,eAAe,cAAc,CAAC,EACzE;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB,CAAC,OAAO,EAAE,iBAAiB;YAC9C;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB;gBACA,qBAAqB;gBACrB,oBAAoB;YACtB;QACF;QAGF,IAAI,IAAI,EAAE,EAAE;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;YAAK;QAC3C;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,WAAW;QAAmC,GAC7D;YAAE,QAAQ,IAAI,MAAM;QAAC;IAEzB,EAAE,OAAM;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkC,GAAG;YAAE,QAAQ;QAAI;IACvF;AACF"}}]
}